<!-- è®¢å•åˆ—è¡¨é¡µé¢ -->
<view class="orders-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="back-btn" bindtap="goBack">â†</view>
    <text class="page-title">æˆ‘çš„è®¢å•</text>
    <view class="header-placeholder"></view>
  </view>
  <!-- æ ‡ç­¾æ  -->
  <view class="tabs-bar">
    <view 
      class="tab-item {{currentTab === item.key ? 'active' : ''}}"
      wx:for="{{tabs}}"
      wx:key="key"
      data-tab="{{item.key}}"
      bindtap="switchTab"
    >
      {{item.label}}
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="orders-list">
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-orders" wx:if="{{filteredOrders.length === 0}}">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="empty-text">æš‚æ— è®¢å•</text>
    </view>

    <!-- è®¢å•é¡¹ -->
    <view 
      class="order-item"
      wx:for="{{filteredOrders}}"
      wx:key="id"
      bindtap="viewOrderDetail"
      data-id="{{item.id}}"
    >
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <text class="order-id">è®¢å•å·ï¼š{{item.id}}</text>
        <text class="order-status {{item.status}}">{{item.statusText || item.status}}</text>
      </view>

      <!-- è®¢å•å•†å“ -->
      <view class="order-items">
        <view 
          class="order-item-product"
          wx:for="{{item.items}}"
          wx:key="id"
          wx:for-item="product"
        >
          <image class="product-image" src="{{product.image}}" mode="aspectFill"></image>
          <view class="product-info">
            <text class="product-title">{{product.title}}</text>
            <text class="product-spec">{{product.spec}}</text>
            <view class="product-bottom">
              <text class="product-price">Â¥{{product.price}}</text>
              <text class="product-quantity">x{{product.quantity}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- è®¢å•åº•éƒ¨ -->
      <view class="order-footer">
        <text class="order-time">{{item.createTime}}</text>
        <view class="order-total">
          <text class="total-label">åˆè®¡ï¼š</text>
          <text class="total-price">Â¥{{item.totalPrice}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="order-actions">
        <button 
          class="action-btn secondary"
          wx:if="{{item.status === 'unpaid'}}"
          catchtap="cancelOrder"
          data-id="{{item.id}}"
        >
          å–æ¶ˆè®¢å•
        </button>
        <button 
          class="action-btn primary"
          wx:if="{{item.status === 'unpaid'}}"
          catchtap="payOrder"
          data-id="{{item.id}}"
        >
          ç«‹å³æ”¯ä»˜
        </button>
        <button 
          class="action-btn primary"
          wx:if="{{item.status === 'unconfirmed'}}"
          catchtap="confirmReceive"
          data-id="{{item.id}}"
        >
          ç¡®è®¤æ”¶è´§
        </button>
        <button 
          class="action-btn secondary"
          wx:if="{{item.status === 'completed'}}"
          catchtap="buyAgain"
          data-order="{{item}}"
        >
          å†æ¬¡è´­ä¹°
        </button>
      </view>
    </view>
  </view>
</view>





